{% extends app.request.xmlHttpRequest ? 'form.html.twig' : 'base.html.twig' %}
{% import "invoice/actions.html.twig" as actions %}

{% block page_title %}{{ 'invoice_document.title'|trans }}{% endblock %}
{% block page_actions %}{{ actions.invoice_upload('index') }}{% endblock %}

{% block main %}
    {% if form is not null %}
        {% set formEditTemplate = app.request.xmlHttpRequest ? 'default/_form_modal.html.twig' : 'default/_form.html.twig' %}
        {% set formOptions = {
            'title': 'upload'|trans,
            'form': form,
            'reset': false
        } %}

        {% embed formEditTemplate with formOptions %}
            {% block form_body %}
                {{ form_row(form.document) }}
                {{ form_widget(form) }}
            {% endblock %}
        {% endembed %}
    {% endif %}

    {% if documents|length > 0 %}
        {% embed '@theme/embeds/card.html.twig' with {'documents': documents} %}
            {% import "project/actions.html.twig" as actions %}
            {% import "macros/widgets.html.twig" as widgets %}
            {% block box_title %}{{ 'label.invoice_renderer'|trans({}, 'invoice-renderer') }}{% endblock %}
            {% block box_attributes %}
                id="invoice_document_list"
            {% endblock %}
            {% block box_body_class %}p-0{% endblock %}
            {% block box_body %}
                <table class="table table-hover dataTable">
                    <thead>
                        <th>{{ 'label.id'|trans }}</th>
                        <th>{{ 'label.date'|trans }}</th>
                        <th>{{ 'file'|trans }}</th>
                    </thead>
                    <tbody>
                    {% for document in documents %}
                        <tr>
                            <td class="text-nowrap">{{ document.id }}</td>
                            <td class="text-nowrap">{{ document.lastChange|date }}</td>
                            <td>{{ document.name }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            {% endblock %}
        {% endembed %}
    {% endif %}
{% endblock %}
